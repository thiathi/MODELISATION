function l_5Hk(a,b){a.D7d.set(b.id,b)}function l_6Hk(a,b){a.XWf.unshift(b)}function l_7Hk(a,b){const c=l_F4i(a,b);if(c instanceof l_W2i){const d=c.l7a.toJSON();a.hIk.Oa(d);a.wg.Oa(b)}return c};var l_8Hk=l_ti({vKd:"plain text"});var l_9Hk=l_ti({uNe:"shape library",Wyl:"content gallery data panel",ypl:"build"});var l_$Hk,l_aIk=l_$Hk=class{constructor(a){this.name="generatedUML";this.documentId=a.documentId;this.format=a.format;this.method=a.method;this.lya=a.lya;this.userId=a.userId}toJSON(){return l_$Hk.Bb(this)}};l_aIk=l_$Hk=__decorate([l_vi({documentId:["documentId",l_k],format:["format",l_8Hk],method:["method",l_9Hk],lya:["nRows",l_ri],userId:["userId",l_ri],name:["name",l_oi("generatedUML")]}),__metadata("design:paramtypes",[Object])],l_aIk);var l_bIk=class extends l_ME{constructor(a,b,c,d,e){super(a,b,c);this.pe=e;this.type="advanced_shape_options";this.ba={columns:i18n.get("advanced-options-swimlane-columns"),rows:i18n.get("advanced-options-swimlane-rows")};if(a=d.getProperty(this.Tb(),"RowCount"))this.FNb=this.pe.create(a),l_KE(this,this.FNb);if(d=d.getProperty(this.Tb(),"ColumnCount"))this.rBb=this.pe.create(d),l_KE(this,this.rBb)}Tb(){return l_b3.className}ngAfterViewInit(){l_LE(this)}get cols(){return this.rBb?this.rBb.Ra():1}set cols(a){this.rBb&&
this.rBb.setValue(a)}get rows(){return this.FNb?this.FNb.Ra():1}set rows(a){this.FNb&&this.FNb.setValue(a)}};l_bIk.Aa=()=>[{type:l_as},{type:l_3},{type:l_4},{type:l_qS},{type:l_gX}];l_bIk.oa=function(a){return new (a||l_bIk)(l_M(l_as),l_M(l_3),l_M(l_4),l_M(l_qS),l_M(l_gX))};
l_bIk.Ja=l_H({type:l_bIk,Ea:[["lucid-multi-dimensional-swimlane-advanced-options"]],features:[l_O],Ka:4,Ia:14,Ma:[[3,"label"],[3,"visualStep","scalar","min","max","precision","value","valueChange"]],template:function(a,b){a&1&&(l_R(0,"lucid-rich-menu-item",0)(1,"lucid-spinner",1),l_U("valueChange",function(c){return b.cols=c}),l_S()(),l_R(2,"lucid-rich-menu-item",0)(3,"lucid-spinner",1),l_U("valueChange",function(c){return b.rows=c}),l_S()());a&2&&(l_Q("label",b.ba.columns),l_N(1),l_Q("visualStep",
1)("scalar",1)("min",1)("max",50)("precision",1)("value",b.cols),l_N(1),l_Q("label",b.ba.rows),l_N(1),l_Q("visualStep",1)("scalar",1)("min",1)("max",50)("precision",1)("value",b.rows))},Na:[l_WJ,l_RF],styles:["[_nghost-%COMP%]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}lucid-spinner[_ngcontent-%COMP%]{max-width:72px}lucid-toggle-icon[_ngcontent-%COMP%] + lucid-toggle-icon[_ngcontent-%COMP%]{margin-left:8px}lucid-click-edit-text[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis;border-radius:3px;border:1px solid #979ea8;font-size:14px;max-width:40em;line-height:1.5em;min-height:1.5em;padding:0 4px}lucid-click-edit-text[_ngcontent-%COMP%]   .edit-text-container[_ngcontent-%COMP%]{padding:4px}lucid-rich-menu-item.wide-content[_ngcontent-%COMP%]   lucid-single-select-dropdown[_ngcontent-%COMP%]{width:100%}"],
changeDetection:0});var l_cIk=class{};l_cIk.oa=function(a){return new (a||l_cIk)};l_cIk.Za=l_I({type:l_cIk});l_cIk.Ya=l_F({imports:[l_6,l_TB,l_VS,l_nF,l_XK,l_VX,l_rV,l_uH]});function l_dIk(a){const b=a.Um.cea("UMLSequenceGenerator",{x:0,y:0},{},void 0,void 0,{});a=a.document.Yl.get(b);if(a instanceof l_G4i)return a}function l_eIk(a,b){b.kq();const c=b.Hx();if(c){const d=l_Gbf(a.Im,b.getPage(),b.eg.className);a.ib.Hb(new l_8v("SetProperty",{id:b.groupId,Property:l_yf.key,Value:d}));a.selection.Bi([c.id])}else a.selection.Bi(b.WB().map(d=>d.id));return c}
var l_fIk=class extends l_H_{constructor(a,b,c,d){super(...a);this.selection=b;this.Um=c;this.Im=d}hfa(){}yGb(){return{w:900,h:320}}};l_fIk=__decorate([l_v(),__param(0,l_bp(l_H_)),__metadata("design:paramtypes",[void 0,l_VN,l_O_,l_mM])],l_fIk);function l_gIk(a,b,c,d){a.user&&a.analytics.cya.U9("uml-markup-used",a.user.id,l_Si,"uml-markup-used");let e;e=c?c.UML_Sequence:b?b.internal.getProperties().get("Markup").UML_Sequence:a.Brk;var f=null==b?void 0:b.getGenerator();let g=void 0;g=f instanceof l_G4i?f:l_dIk(a.$Fd);let h;f=null==(h=g)?void 0:l_7Hk(h,Object.assign({},c||{},{UML_Sequence:e}));if(!f||!g)return null;if(f instanceof l_W2i){c=l_eIk(a.$Fd,g);b&&b!==c&&(g.properties.location.Oa({x:b.hv.value.x,y:b.hv.value.y}),a.KM.DH([b],!0));
c&&Array.from(c.cDa.value).forEach(l=>{l instanceof l_YL?a.AW.gfa(l,"uml markup"):l instanceof l_E&&a.AW.JG({item:l,sx:"uml markup",tSi:"uml"})});let k;a.Wh.fireEvent(new l_aIk({documentId:null!=(k=a.document.id)?k:"",format:"plain text",method:null!=d?d:"build",lya:e.split("\n").length,userId:a.user.getId()}));return null}return{message:f.CU(),lineNum:f.znf()}}
function l_hIk(a,b,c,d){c=c?Object.assign({},c,{UML_Sequence:c.UML_Sequence.replace(/“|”/g,'"')}):void 0;if(a.user.Pl.wk().Dh("UMLMarkup")){const e=b&&1==b.length?b[0]:void 0;if(e&&e instanceof l_ZL&&e.internal.getProperties().get("Markup")&&b)return l_gIk(a,e,c,d);if(!b||1!=b.length)return l_gIk(a,null,c,d)}else a.user&&a.analytics.cya.U9("uml-markup-editor-paywall",a.user.id,l_Si,"uml-markup-editor-paywall"),l__bf(a.qd);return null}
var l_iIk=class{constructor(a,b,c,d,e,f,g,h,k){this.document=a;this.selection=b;this.user=c;this.analytics=d;this.Wh=e;this.qd=f;this.AW=g;this.$Fd=h;this.KM=k;this.Brk="Alice -> Bob\nAlice <-- Bob\nAlice -> Bob: text\nnote right of Alice: note"}uAj(){const a=l_Thf(this.selection.items);return a&&a.internal.getProperties().get("Markup")?[a]:[]}};l_iIk=__decorate([l_v(),__metadata("design:paramtypes",[l_AM,l_VN,l_7,l_lx,l_dD,l_nM,l_vO,l_fIk,l_pN])],l_iIk);var l_jIk=class{constructor(a,b,c,d,e,f,g,h,k,l,m,n,p,q,r,t,u,v,w,x){this.yl=a;this.Gaa=b;this.viewport=c;this.selection=d;this.ib=e;this.Sl=g;this.qd=h;this.Bwb=k;this.Txd=l;this.qg=m;this.AW=n;this.NRc=p;this.Xi=q;this.bga=r;this.eef=t;this.gk=u;this.icg=v;this.hX=w;this.$Fd=x}};l_jIk=__decorate([l_v(),__param(0,l_7o(l_jq)),__metadata("design:paramtypes",[Object,l_iPf,l_AP,l_VN,l_wx,l_Euf,l_sO,l_nM,l_Duf,l_acf,l_qp,l_vO,l_iIk,l_mO,l_sp,l_I4i,l_bM,l_Pzi,l_BDc,l_fIk])],l_jIk);
function l_kIk(a){l_NN(a.selection,a.Da,l_ON,a.T7k.bind(a));const b=l_Qbg(a.Gaa);b.add({Gb:"ios_inputs"});let c=!1;const d=f=>{c&&b.spacer();c=!0;b.openGrid({prefix:2,qna:2,width:8});b.addButton({onClick:()=>{a.Mxd&&f.xf(a.Mxd)},label:f.name});b.close()},e={iBn:{name:i18n.get("plugin-uml-option-multiplicity"),xf:f=>{const g=f.zb.value;void 0==g.get("m1")&&f.pb(0,{t:"0..*",m:[]},1,"m1");void 0==g.get("m2")&&f.pb(1,{t:"0..*",m:[]},-1,"m2")}},pFn:{name:i18n.get("plugin-uml-option-line-reverse"),xf:f=>
{var g=f.properties.ug.value;const h=f.properties.hg.value,k=(m,n)=>{n=m instanceof l_ml?l_ml.create({block:m.block,zf:m.zf,pD:m.pD,HB:m.HB,jo:m.jo,pn:m.pn,style:n.style,padding:n.padding}):m instanceof l_ol?new l_ol(m.line,m.fV,m.oPa,n.style,n.padding):new l_ll(m.x,m.y,n.style);n.x=m.x;n.y=m.y;return n};var l=k(g,h);g=k(h,g);f.properties.ug.Oa(l);f.properties.hg.Oa(g);l=l_Sh(f.properties.zb.value);l.forEach(m=>{null!=m.location&&(m.location=1-m.location)});0<l.size&&f.properties.zb.Oa(l)}}};l_Fc(e,
f=>{d(f)});l_Rbg(a.Gaa,[{content:b,label:""}],{isContextPanel:!0,checkShow:()=>!!a.Mxd})}function l_lIk(a,b){return l_c(function*(){const c=l_dIk(a.V6.$Fd);if(void 0===c)return{success:!1};if(l_7Hk(c,{UML_Sequence:b})instanceof l_W2i)return l_eIk(a.V6.$Fd,c),c.wfb(),{success:!0};c.vZ();return{success:!1}})}
var l_mIk=class extends l_g{constructor(a,b,c,d,e,f,g,h){super();this.gk=d;this.Xa=e;this.document=f;this.user=g;this.V6=h;this.qg=this.V6.qg;this.Txd=this.V6.Txd;this.Gaa=this.V6.Gaa;this.NRc=this.V6.NRc;this.selection=this.V6.selection;this.Da=new l_in(this);this.Mxd=null;l_6Hk(h.viewport.navigator,this.cIk.bind(this));this.V6.bga.register("UMLSequenceGenerator",[this.V6.eef]);l_b3.Uc(a);l_$2.Uc(a);l_v4i.Uc(a);a.register({className:"UMLSequence",propertyName:"Markup",value:(k,l)=>new l_Xq(k,()=>
{let m,n;if(1==l.length){let q;var p=null!=(q=l[0].internal.getProperties().get("Markup"))?q:null}else p=null;return null!=(n=null==(m=p)?void 0:m.UML_Sequence)?n:null},(m,n)=>m===n,()=>{}),enabled:k=>new l_w(k,()=>!0,(l,m)=>l===m),Dyd:(k,l)=>{{const n={UML_Sequence:l};try{const p=JSON.parse(l);var m=l_k4i(p)?p:n}catch(p){m=n}}return l_hIk(this.NRc,k,m)},Bnb:this.NRc.uAj});l_pp(this.qg,{Tf:[l_bIk,l_H1],module:l_cIk});h.Xi.$f([{type:"advanced_shape_options",registration:{component:l_H1}}],{selection:{Vh:new Set([l_v4i.className,
l_$2.className,l_$2.U0a])}});h.Xi.$f([{type:"advanced_shape_options",registration:{component:l_bIk}}],{selection:{Vh:new Set([l_b3.className])}});h.yl.promise.then(()=>{b.cya.U9("uml-shape-library-enabled",g.id,l_Si,"uml-shape-library-enabled");l_kIk(this)});this.Txd.setCallback(()=>{l_hIk(this.NRc,void 0,void 0,"content gallery data panel")});this.Da.listen(c,l_d4i,()=>{this.gk.Kh("uml")||(this.Xa.fireEvent(new l_dj({userId:parseInt(this.user.id),method:"shape library",pj:"uml sequence markup",documentId:this.document.id})),
l_hIk(this.NRc,void 0,void 0,"shape library"))});l_5Hk(h.hX,{id:"UmlViewLibrary",generate:k=>l_lIk(this,k)});l_Vbg(h.viewport,h.icg)}cIk(a){const b=this.V6.Sl.XM();if(b)for(const c of b.items.values())if(c.id==a&&c instanceof l_ZL&&c.internal.getProperties().get("Markup"))return!1;return!0}T7k(){const a=c=>{function d(e){if(!(e instanceof l_ml&&e.block))return!1;e=e.block.eg.className;return!!e&&0==e.search("UML")}return d(c.properties.ug.value)||d(c.properties.hg.value)};this.Mxd=null;var b=this.selection.kc();
1==b.length&&(b=b[0],b instanceof l_YL&&a(b)&&(this.Mxd=b))}};l_mIk=__decorate([l_v(),__metadata("design:paramtypes",[l_qS,l_lx,l_c4i,l_bM,l_dD,l_AM,l_7,l_jIk])],l_mIk);l_JR("umlview","uml",l_mIk);
//# sourceURL=/js/application/chart_app/chunk/umlview.js?compiled=1
